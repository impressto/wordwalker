# WordWalker Deployment Scripts

Quick deployment helper scripts for the WordWalker PWA.

## Scripts

### `./deploy.sh` - Full Deployment Helper

Interactive script that helps you deploy WordWalker with proper versioning.

**Features:**
- Automatic version bumping (patch/minor/major)
- Updates package.json and service-worker.js versions
- Builds the project with yarn build
- Verifies version consistency
- Shows deployment checklist
- Provides testing instructions

**Usage:**
```bash
./deploy.sh
```

Then follow the prompts:
1. Choose version bump type (or skip)
2. Wait for build to complete
3. Review deployment checklist
4. Upload files to server

### `./check-pwa.sh` - PWA Status Checker

Quick verification script to check PWA setup and version consistency.

**Features:**
- Checks version consistency between package.json and service-worker.js
- Verifies all required files exist
- Lists icon files status
- Shows audio files status
- Displays image files status
- Shows service worker and manifest configuration

**Usage:**
```bash
./check-pwa.sh
```

## Typical Workflow

### 1. Make Changes
Edit your code, add features, fix bugs, etc.

### 2. Check Status
```bash
./check-pwa.sh
```
This shows you what files exist and if versions match.

### 3. Deploy
```bash
./deploy.sh
```
Choose your version bump type:
- **Patch (0.0.X)** - Bug fixes, small changes
- **Minor (0.X.0)** - New features, backwards compatible
- **Major (X.0.0)** - Breaking changes
- **Skip** - No version change

### 4. Upload to Server
Upload these files to your web server:
- `index.php`
- `package.json`
- `dist/` folder (entire folder)
- `pwa-test.html` (optional, for debugging)

### 5. Test
Visit your deployed app:
- Main app: `https://impressto.ca/wordwalker/index.php`
- PWA test tool: `https://impressto.ca/wordwalker/pwa-test.html`

## Manual Version Update

If you need to manually update the version:

1. **Update package.json:**
   ```json
   "version": "1.0.5"
   ```

2. **Update public/service-worker.js:**
   ```javascript
   const CACHE_NAME = 'wordwalker-v1.0.5';
   ```

3. **Build:**
   ```bash
   yarn build
   ```

4. **Verify:**
   ```bash
   ./check-pwa.sh
   ```

## Troubleshooting

### Versions Don't Match
- Update `CACHE_NAME` in `public/service-worker.js`
- Rebuild with `yarn build`
- Run `./check-pwa.sh` to verify

### Build Fails
- Check for syntax errors in your code
- Run `yarn install` to ensure dependencies are installed
- Check console output for specific errors

### Missing Files
- Icons: Replace placeholder files in `public/` with real icons
- Audio: Ensure all audio files are in `public/audio/`
- Images: Ensure all images are in `public/images/`

### Service Worker Not Updating
- Increment version in package.json
- Update CACHE_NAME in public/service-worker.js
- Rebuild and redeploy
- Clear browser cache or use incognito mode

## Quick Reference

### Check if everything is ready:
```bash
./check-pwa.sh
```

### Deploy with version bump:
```bash
./deploy.sh
# Choose option 1, 2, or 3 for version bump
```

### Deploy without version bump:
```bash
./deploy.sh
# Choose option 4 to skip version bump
```

### After deployment, test:
1. Visit `https://impressto.ca/wordwalker/pwa-test.html`
2. Check all tests pass
3. Test app functionality
4. Test offline mode
5. Test installation

## Files Modified by deploy.sh

- `package.json` - Version number
- `public/service-worker.js` - CACHE_NAME version

## Files Generated by Build

- `dist/` folder - All production files
  - `dist/index.html`
  - `dist/manifest.json`
  - `dist/service-worker.js`
  - `dist/assets/` - JS and CSS bundles
  - `dist/images/` - Game images
  - `dist/audio/` - Sound effects and music
  - `dist/icon-*.png` - PWA icons

## Important Notes

- Always rebuild after version changes
- Service worker is in `dist/service-worker.js` (copied from `public/`)
- Cache busting uses version from `package.json`
- index.php must be uploaded to root (not in dist/)
- Test offline functionality after each deployment

## Need Help?

Check these files:
- `PWA-SETUP.md` - Comprehensive PWA setup guide
- `PWA-QUICKSTART.md` - Quick start guide
- `PWA-DEPLOYMENT-CHECKLIST.md` - Deployment verification
- `PWA-IMPLEMENTATION-SUMMARY.md` - Technical details
